// WaitSmart AI - Translation System
const translations = {
    nl: {
        // Navigation
        features: "Functies",
        liveDemo: "Live Demo",
        roiCalculator: "ROI Calculator",
        contact: "Contact",
        login: "Inloggen",
        startPilot: "Start Gratis Pilot",
        
        // Hero Section
        heroBadge: "109.000+ GGZ patiënten wachten • 22.000+ verpleeghuis wachtenden",
        heroTitle1: "Stop de Wachtlijst Crisis met",
        heroTitle2: "AI-Gedreven Intelligentie",
        heroSubtitle: "WaitSmart AI reduceert wachttijden met 40%, verbetert datakwaliteit naar 95%+, en zorgt dat urgente patiënten prioriteit krijgen. Waar 50% van de zorgaanbieders nu foutieve data aanlevert, creëren wij orde in de chaos.",
        viewDemo: "Bekijk Live Demo",
        calculateROI: "Bereken Uw ROI",
        
        // Stats
        shorterWaitTimes: "Kortere Wachttijden",
        annualSavings: "Besparing per Jaar",
        dataAccuracy: "Data Accuraatheid",
        within90Days: "binnen 90 dagen",
        roiIn6Months: "ROI in 6 maanden",
        from50Percent: "van 50%",
        
        // Problems
        problemData: "50% Foutieve Data",
        problemDataDesc: "De helft van alle zorgaanbieders levert incorrecte wachtlijstdata aan, wat leidt tot verkeerde beslissingen.",
        problemUrgent: "Urgente Cases Wachten",
        problemUrgentDesc: "Patiënten met acute zorgbehoeften verdwijnen in de massa door gebrek aan intelligente prioritering.",
        problemCoordination: "Geen Coördinatie",
        problemCoordinationDesc: "Zorginstellingen werken in silo's terwijl de ene overvolle wachtlijsten heeft en de andere capaciteit over.",
        problemManual: "Handmatige Processen",
        problemManualDesc: "Uren verspild aan Excel-lijsten updaten in plaats van patiënten helpen.",
        
        // Features
        completeSolution: "Complete Oplossing",
        everythingYouNeed: "Alles Wat U Nodig Heeft Voor",
        smartWaitingLists: "Intelligente Wachtlijsten",
        
        // Dashboard
        dashboard: "Dashboard",
        totalWaiting: "Totaal Wachtenden",
        urgentCases: "Urgente Cases",
        actionRequired: "ACTIE VEREIST",
        avgWaitTime: "Gem. Wachttijd",
        dataQuality: "Data Kwaliteit",
        lessLastMonth: "minder dan vorige maand",
        newSinceYesterday: "nieuwe sinds gisteren",
        days: "dagen",
        target: "Target",
        
        // Charts
        waitingListTrend: "Wachtlijst Trend (6 maanden)",
        capacityVsDemand: "Capaciteit vs Vraag",
        recentAlerts: "Recente Waarschuwingen",
        viewList: "Bekijk lijst",
        planExtraSlots: "Plan extra slots",
        
        // AI Prioritization
        aiPrioritization: "AI Prioritering",
        recalculateAll: "Herbereken Alle Scores",
        patient: "Patiënt",
        wait: "Wacht",
        age: "Leeftijd",
        aiAnalysis: "AI Analyse",
        directSchedule: "Direct Plannen",
        refer: "Doorverwijzen",
        planWithin2Weeks: "Plan Binnen 2 Weken",
        details: "Details",
        
        // Regional Coordination
        regionalCoordination: "Regionale Coördinatie",
        regionalCapacityMap: "Regionale Capaciteitskaart",
        capacityAvailable: "Capaciteit beschikbaar",
        fullOverloaded: "Vol/Overbelast",
        aiTransferSuggestions: "AI Transfer Suggesties",
        recommended: "AANBEVOLEN",
        daysFaster: "dagen sneller",
        startTransferProcess: "Start Transfer Process",
        
        // Analytics
        predictiveAnalytics: "Voorspellende Analyse",
        forecastingTitle: "Voorspellende Analyses & Prognoses",
        waitingListForecast: "Wachtlijst Prognose",
        seasonalPatterns: "Seizoenspatronen",
        aiPredicts: "AI voorspelt 18% toename in Q1 2025 - adviseer extra capaciteit",
        
        // ROI Section
        calculateYourROI: "Bereken Uw Return on Investment",
        discoverSavings: "Ontdek hoeveel WaitSmart AI uw organisatie kan besparen",
        patientsOnWaitingList: "Aantal patiënten op wachtlijst",
        averageWaitTimeDays: "Gemiddelde wachttijd (dagen)",
        fteWaitingListManagement: "FTE besteed aan wachtlijstbeheer",
        noShowPercentage: "No-show percentage",
        estimatedAnnualSavings: "Geschatte Jaarlijkse Besparingen",
        totalSavings: "Totale Besparing",
        administrativeEfficiency: "Administratieve efficiëntie",
        reducedNoShows: "Verminderde no-shows",
        improvedCapacityUtilization: "Verbeterde capaciteitsbenutting",
        paybackTime: "Terugverdientijd",
        months: "maanden",
        downloadFullReport: "Download Volledig ROI Rapport",
        
        // Success Stories
        provenResults: "Bewezen Resultaten",
        whatCustomersAchieve: "Wat Onze Klanten",
        achieve: "Bereiken",
        waitTimeReduction: "Wachttijd reductie",
        annualSavingAmount: "Jaarlijkse besparing",
        fewerSupportTickets: "Minder support tickets",
        fasterResponseTime: "Snellere response tijd",
        
        // CTA Section
        readyToSolve: "Klaar om de Wachtlijstcrisis Op te Lossen?",
        startToday: "Start vandaag met WaitSmart AI en zie resultaten binnen 30 dagen",
        startFreePilot: "Start Gratis Pilot",
        scheduleDemo: "Plan een Demo",
        noImplementationCosts: "Geen implementatiekosten",
        fullyGDPRCompliant: "Volledig GDPR compliant",
        integrationWithin48Hours: "Integratie binnen 48 uur",
        
        // Footer
        product: "Product",
        company: "Bedrijf",
        aboutUs: "Over Ons",
        privacy: "Privacy",
        terms: "Voorwaarden",
        compliance: "Compliance",
        intelligentWaitingListManagement: "Intelligente wachtlijst management voor de Nederlandse zorg",
        aProductOf: "Een product van Upsell Business Agency",
        
        // Additional translations
        completeSolution: "Complete Oplossing",
        everythingYouNeed: "Alles Wat U Nodig Heeft Voor",
        smartWaitingLists: "Slimme Wachtlijsten",
        experiencePower: "Ervaar de Kracht van",
        
        // Features
        intelligentDashboard: "Intelligent Dashboard",
        intelligentDashboardDesc: "Real-time overzicht van alle wachtlijsten met AI-prioritering, capaciteitsplanning en prestatie-indicatoren.",
        feature1Item1: "Live wachtlijst status & trends",
        feature1Item2: "AI risico-assessment per patiënt",
        feature1Item3: "Automatische capaciteitsmatching",
        feature1Item4: "Regionale vergelijkingen",
        
        aiPrioritizationEngine: "AI Prioritering Engine",
        aiPrioritizationEngineDesc: "Slimme algoritmes die medische urgentie, wachttijd en risicofactoren combineren voor eerlijke prioritering.",
        feature2Item1: "Automatische urgentie scoring",
        feature2Item2: "Predictive deterioration modeling",
        feature2Item3: "Fairness balancing algoritmes",
        feature2Item4: "Machine learning optimalisatie",
        urgencyScore: "Urgentie Score",
        medicalHigh: "Medisch: Hoog",
        waitTime127: "Wachttijd: 127 dagen",
        riskCritical: "Risico: Kritiek",
        
        crossProviderCoordination: "Cross-Provider Coördinatie",
        crossProviderCoordinationDesc: "Werk samen met andere zorginstellingen voor optimale capaciteitsbenutting in de regio.",
        feature3Item1: "Regionale capaciteitskaart",
        feature3Item2: "Automatische verwijssuggesties",
        feature3Item3: "Veilige communicatie tussen instellingen",
        feature3Item4: "Anonieme data sharing",
        
        // Success stories additional
        freedUp: "Vrijgespeeld"
    },
    
    en: {
        // Navigation
        features: "Features",
        liveDemo: "Live Demo",
        roiCalculator: "ROI Calculator",
        contact: "Contact",
        login: "Login",
        startPilot: "Start Free Pilot",
        
        // Hero Section
        heroBadge: "109,000+ mental health patients waiting • 22,000+ nursing home queue",
        heroTitle1: "Stop the Waiting List Crisis with",
        heroTitle2: "AI-Powered Intelligence",
        heroSubtitle: "WaitSmart AI reduces waiting times by 40%, improves data quality to 95%+, and ensures urgent patients get priority. Where 50% of healthcare providers now submit incorrect data, we create order from chaos.",
        viewDemo: "View Live Demo",
        calculateROI: "Calculate Your ROI",
        
        // Stats
        shorterWaitTimes: "Shorter Wait Times",
        annualSavings: "Annual Savings",
        dataAccuracy: "Data Accuracy",
        within90Days: "within 90 days",
        roiIn6Months: "ROI in 6 months",
        from50Percent: "from 50%",
        
        // Problems
        problemData: "50% Incorrect Data",
        problemDataDesc: "Half of all healthcare providers submit incorrect waiting list data, leading to wrong decisions.",
        problemUrgent: "Urgent Cases Wait",
        problemUrgentDesc: "Patients with acute care needs disappear in the crowd due to lack of intelligent prioritization.",
        problemCoordination: "No Coordination",
        problemCoordinationDesc: "Healthcare institutions work in silos while one has overcrowded waiting lists and another has excess capacity.",
        problemManual: "Manual Processes",
        problemManualDesc: "Hours wasted updating Excel lists instead of helping patients.",
        
        // Features
        completeSolution: "Complete Solution",
        everythingYouNeed: "Everything You Need For",
        smartWaitingLists: "Smart Waiting Lists",
        
        // Dashboard
        dashboard: "Dashboard",
        totalWaiting: "Total Waiting",
        urgentCases: "Urgent Cases",
        actionRequired: "ACTION REQUIRED",
        avgWaitTime: "Avg. Wait Time",
        dataQuality: "Data Quality",
        lessLastMonth: "less than last month",
        newSinceYesterday: "new since yesterday",
        days: "days",
        target: "Target",
        
        // Charts
        waitingListTrend: "Waiting List Trend (6 months)",
        capacityVsDemand: "Capacity vs Demand",
        recentAlerts: "Recent Alerts",
        viewList: "View list",
        planExtraSlots: "Plan extra slots",
        
        // AI Prioritization
        aiPrioritization: "AI Prioritization",
        recalculateAll: "Recalculate All Scores",
        patient: "Patient",
        wait: "Wait",
        age: "Age",
        aiAnalysis: "AI Analysis",
        directSchedule: "Schedule Now",
        refer: "Refer",
        planWithin2Weeks: "Plan Within 2 Weeks",
        details: "Details",
        
        // Regional Coordination
        regionalCoordination: "Regional Coordination",
        regionalCapacityMap: "Regional Capacity Map",
        capacityAvailable: "Capacity available",
        fullOverloaded: "Full/Overloaded",
        aiTransferSuggestions: "AI Transfer Suggestions",
        recommended: "RECOMMENDED",
        daysFaster: "days faster",
        startTransferProcess: "Start Transfer Process",
        
        // Analytics
        predictiveAnalytics: "Predictive Analytics",
        forecastingTitle: "Predictive Analytics & Forecasting",
        waitingListForecast: "Waiting List Forecast",
        seasonalPatterns: "Seasonal Patterns",
        aiPredicts: "AI predicts 18% increase in Q1 2025 - recommend extra capacity",
        
        // ROI Section
        calculateYourROI: "Calculate Your Return on Investment",
        discoverSavings: "Discover how much WaitSmart AI can save your organization",
        patientsOnWaitingList: "Patients on waiting list",
        averageWaitTimeDays: "Average wait time (days)",
        fteWaitingListManagement: "FTE spent on waiting list management",
        noShowPercentage: "No-show percentage",
        estimatedAnnualSavings: "Estimated Annual Savings",
        totalSavings: "Total Savings",
        administrativeEfficiency: "Administrative efficiency",
        reducedNoShows: "Reduced no-shows",
        improvedCapacityUtilization: "Improved capacity utilization",
        paybackTime: "Payback time",
        months: "months",
        downloadFullReport: "Download Full ROI Report",
        
        // Success Stories
        provenResults: "Proven Results",
        whatCustomersAchieve: "What Our Customers",
        achieve: "Achieve",
        waitTimeReduction: "Wait time reduction",
        annualSavingAmount: "Annual savings",
        fewerSupportTickets: "Fewer support tickets",
        fasterResponseTime: "Faster response time",
        
        // CTA Section
        readyToSolve: "Ready to Solve the Waiting List Crisis?",
        startToday: "Start with WaitSmart AI today and see results within 30 days",
        startFreePilot: "Start Free Pilot",
        scheduleDemo: "Schedule Demo",
        noImplementationCosts: "No implementation costs",
        fullyGDPRCompliant: "Fully GDPR compliant",
        integrationWithin48Hours: "Integration within 48 hours",
        
        // Footer
        product: "Product",
        company: "Company",
        aboutUs: "About Us",
        privacy: "Privacy",
        terms: "Terms",
        compliance: "Compliance",
        intelligentWaitingListManagement: "Intelligent waiting list management for Dutch healthcare",
        aProductOf: "A product of Upsell Business Agency",
        
        // Additional translations
        completeSolution: "Complete Solution",
        everythingYouNeed: "Everything You Need For",
        smartWaitingLists: "Smart Waiting Lists",
        experiencePower: "Experience the Power of",
        
        // Features
        intelligentDashboard: "Intelligent Dashboard",
        intelligentDashboardDesc: "Real-time overview of all waiting lists with AI prioritization, capacity planning and performance indicators.",
        feature1Item1: "Live waiting list status & trends",
        feature1Item2: "AI risk assessment per patient",
        feature1Item3: "Automatic capacity matching",
        feature1Item4: "Regional comparisons",
        
        aiPrioritizationEngine: "AI Prioritization Engine",
        aiPrioritizationEngineDesc: "Smart algorithms that combine medical urgency, waiting time and risk factors for fair prioritization.",
        feature2Item1: "Automatic urgency scoring",
        feature2Item2: "Predictive deterioration modeling",
        feature2Item3: "Fairness balancing algorithms",
        feature2Item4: "Machine learning optimization",
        urgencyScore: "Urgency Score",
        medicalHigh: "Medical: High",
        waitTime127: "Wait time: 127 days",
        riskCritical: "Risk: Critical",
        
        crossProviderCoordination: "Cross-Provider Coordination",
        crossProviderCoordinationDesc: "Collaborate with other healthcare institutions for optimal capacity utilization in the region.",
        feature3Item1: "Regional capacity map",
        feature3Item2: "Automatic referral suggestions",
        feature3Item3: "Secure communication between institutions",
        feature3Item4: "Anonymous data sharing",
        
        // Success stories additional
        freedUp: "Freed up"
    }
};

// Translation function
function translate(key, lang = 'nl') {
    const keys = key.split('.');
    let value = translations[lang];
    
    for (const k of keys) {
        if (value && value[k]) {
            value = value[k];
        } else {
            // Fallback to Dutch if translation not found
            value = translations['nl'];
            for (const fallbackKey of keys) {
                if (value && value[fallbackKey]) {
                    value = value[fallbackKey];
                } else {
                    return key; // Return key if translation not found
                }
            }
            break;
        }
    }
    
    return value;
}

// Set language and update all translations
function setLanguage(lang) {
    console.log('WaitSmart AI - Setting language to:', lang);
    
    // Store language preference
    localStorage.setItem('preferredLanguage', lang);
    
    // Update language switcher buttons
    document.querySelectorAll('.lang-option').forEach(btn => {
        btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
    });
    
    // Update all elements with data-translate attribute
    const elements = document.querySelectorAll('[data-translate]');
    console.log('WaitSmart AI - Found elements to translate:', elements.length);
    
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            element.placeholder = translate(key, lang);
        } else {
            element.textContent = translate(key, lang);
        }
    });
    
    // Update specific elements that need innerHTML or special handling
    updateSpecificTranslations(lang);
}

// Update specific elements that need special handling
function updateSpecificTranslations(lang) {
    // Hero title with gradient
    const heroTitle = document.querySelector('.hero-title');
    if (heroTitle) {
        heroTitle.innerHTML = `
            ${translate('heroTitle1', lang)}
            <span class="gradient-text">${translate('heroTitle2', lang)}</span>
        `;
    }
    
    // Section titles with gradients
    const featureTitle = document.querySelector('#features .section-title');
    if (featureTitle) {
        featureTitle.innerHTML = `
            ${translate('everythingYouNeed', lang)}
            <span class="gradient-text">${translate('smartWaitingLists', lang)}</span>
        `;
    }
    
    // Update nav links
    const navLinks = document.querySelectorAll('.nav-link');
    const navTranslations = ['features', 'liveDemo', 'roiCalculator', 'contact'];
    navLinks.forEach((link, index) => {
        if (navTranslations[index]) {
            link.textContent = translate(navTranslations[index], lang);
        }
    });
    
    // Update chart labels in JavaScript
    if (window.charts && window.charts.trend) {
        updateChartLabels(lang);
    }
}

// Update chart labels
function updateChartLabels(lang) {
    if (window.charts.trend) {
        window.charts.trend.data.datasets[0].label = translate('totalWaiting', lang);
        window.charts.trend.data.datasets[1].label = translate('urgentCases', lang);
        window.charts.trend.update();
    }
    
    if (window.charts.capacity) {
        window.charts.capacity.data.datasets[0].label = lang === 'nl' ? 'Beschikbare Capaciteit' : 'Available Capacity';
        window.charts.capacity.data.datasets[1].label = lang === 'nl' ? 'Benodigde Capaciteit' : 'Required Capacity';
        window.charts.capacity.update();
    }
}

// Initialize translations on page load
document.addEventListener('DOMContentLoaded', () => {
    // Add click handlers to language buttons
    document.querySelectorAll('.lang-option').forEach(btn => {
        btn.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');
            console.log('WaitSmart translations.js - Language button clicked:', lang);
            setLanguage(lang);
        });
    });
    
    const savedLang = localStorage.getItem('preferredLanguage') || 'nl';
    setLanguage(savedLang);
});

// Export for use in other scripts
window.translate = translate;
window.setLanguage = setLanguage;

// Make setLanguage available immediately
if (typeof window !== 'undefined') {
    window.setLanguage = setLanguage;
    window.translate = translate;
}